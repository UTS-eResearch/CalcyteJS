#!/usr/bin/env node
const Collection = require("./collection.js");
const args = require('minimist')(process.argv.slice(2));
const shell = require('shelljs')
const program = require('commander');

var dirs;
program
 .arguments('<directories...>')
 .action(function(directories) {
   console.log(directories);
   dirs = directories;
 })
 .parse(process.argv);

console.log(dirs);

dirs.forEach(function(dir) {

  if (shell.test('-d', dir)) {
      var c = new Collection();
    c.read(dir);
    c.to_json_ld().then(
    function() {
      c.to_html();
    },
    function(err) {
      console.log(err)
    });
  }

});
